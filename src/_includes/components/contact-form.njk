<form 
  name="contact" 
  method="POST" 
  data-netlify="true" 
  netlify-honeypot="bot-field"
  action="/contact/merci/"
  class="space-y-6"
  id="contact-form"
>
  <!-- Honeypot field for spam protection -->
  <p class="hidden">
    <label>Ne pas remplir si vous êtes humain: <input name="bot-field"></label>
  </p>
  
  <input type="hidden" name="form-name" value="contact">
  
  <div class="grid md:grid-cols-2 gap-6">
    <div>
      <label for="name" class="block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2">
        Nom complet <span class="text-red-500">*</span>
      </label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        required
        class="w-full px-4 py-3 border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors placeholder-gray-400 dark:placeholder-dark-400"
        placeholder="Votre nom"
      >
    </div>
    
    <div>
      <label for="email" class="block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2">
        Email <span class="text-red-500">*</span>
      </label>
      <input 
        type="email" 
        id="email" 
        name="email" 
        required
        class="w-full px-4 py-3 border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors placeholder-gray-400 dark:placeholder-dark-400"
        placeholder="votre@email.com"
      >
    </div>
  </div>
  
  <div class="grid md:grid-cols-2 gap-6">
    <div>
      <label for="phone" class="block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2">
        Téléphone
      </label>
      <input 
        type="tel" 
        id="phone" 
        name="phone"
        class="w-full px-4 py-3 border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors placeholder-gray-400 dark:placeholder-dark-400"
        placeholder="06 12 34 56 78"
      >
      <p id="phone-error" class="hidden text-red-500 text-sm mt-1">Numéro de téléphone invalide (ex: 06 12 34 56 78)</p>
    </div>
    
    <div>
      <label for="subject" class="block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2">
        Sujet <span class="text-red-500">*</span>
      </label>
      <select 
        id="subject" 
        name="subject" 
        required
        class="w-full px-4 py-3 border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
      >
        <option value="">Sélectionnez un sujet</option>
        <option value="devis-courant-fort">Devis Courant Fort</option>
        <option value="devis-courant-faible">Devis Courant Faible</option>
        <option value="devis-irve">Devis Bornes de Recharge IRVE</option>
        <option value="devis-gtb">Devis GTB / Domotique</option>
        <option value="devis-entretien">Devis Entretien / Dépannage</option>
        <option value="autre">Autre demande</option>
      </select>
    </div>
  </div>
  
  <div>
    <label for="message" class="block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2">
      Message <span class="text-red-500">*</span>
    </label>
    <textarea 
      id="message" 
      name="message" 
      rows="5" 
      required
      class="w-full px-4 py-3 border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors resize-none placeholder-gray-400 dark:placeholder-dark-400"
      placeholder="Décrivez votre projet ou votre demande..."
    ></textarea>
  </div>
  
  <div>
    <button 
      type="submit"
      class="w-full md:w-auto px-8 py-4 bg-primary-600 text-white font-bold rounded-lg hover:bg-primary-700 focus:ring-4 focus:ring-primary-300 dark:focus:ring-primary-800 transition-all"
    >
      Envoyer ma demande
    </button>
  </div>
  
  <p class="text-sm text-gray-500 dark:text-dark-400">
    <span class="text-red-500">*</span> Champs obligatoires. 
    Vos données sont utilisées uniquement pour répondre à votre demande.
  </p>
</form>

<script>
  const contactForm = document.getElementById('contact-form');
  const phoneInput = document.getElementById('phone');
  const phoneError = document.getElementById('phone-error');
  
  const phoneRegex = /^(?:(?:\+|00)33|0)\s*[1-9](?:[\s.-]*\d{2}){4}$/;
  
  function validatePhone() {
    const value = phoneInput.value.trim();
    if (value && !phoneRegex.test(value)) {
      phoneInput.classList.add('border-red-500', 'focus:ring-red-500');
      phoneInput.classList.remove('border-gray-300', 'dark:border-dark-600');
      phoneError.classList.remove('hidden');
      return false;
    } else {
      phoneInput.classList.remove('border-red-500', 'focus:ring-red-500');
      phoneInput.classList.add('border-gray-300', 'dark:border-dark-600');
      phoneError.classList.add('hidden');
      return true;
    }
  }
  
  phoneInput.addEventListener('blur', validatePhone);
  phoneInput.addEventListener('input', validatePhone);
  
  contactForm.addEventListener('submit', function(e) {
    if (!validatePhone()) {
      e.preventDefault();
      phoneInput.focus();
    }
  });
</script>
